<application>
    
    <!--<stream id="cta:data" class="streams.cta.io.SyntheticEventStream"-->
        <!--limit="10000" />-->

    <!--<stream id="cta:data" class="streams.cta.io.eventio.EventIOStream" url="file:/Users/kai/Downloads/electron_20deg_90deg_run7683___cta-trg-test-LST4_desert_samplemode_test-250MHz.simtel"-->
            <!--limit="1000" />-->
    <!--<property name="infile" value="/fhgfs/groups/app/fact/cta/" />-->
    <property name="infile" value="/Users/kai/fact_phido/cta/" />
    <property name="outfile" value="./cta_data.kryo" />
    <!--<stream id="cta:data" class="streams.cta.io.KryoStream" url="file:${infile}"/>-->

    <!--<stream id="cta:data2" class="streams.cta.io.KryoStream" url="file:./data.kryo" limit="50000" />-->
    <property name="num_copies" value="1" />


    <queue class="stream.io.BlockingQueue" id="out" />

    <stream id="cta:data_${copy.id}" class="streams.cta.io.RecursiveDirectoryStream"
            suffix=".simtel.gz" url="file:${infile}" copies="${num_copies}">
        <stream id="cta:data" class="streams.cta.io.eventio.EventIOStream" url="file:${infile}" ignoreErrors="true"/>
    </stream>

    <process input="cta:data_${copy.id}" copies="${num_copies}">
        <!--<stream.monitor.DataRate every="400"/>-->
        <!--<streams.DataRate every="200" silent="false"/>-->
        <!--<streams.cta.io.KryoWriter url="file:${outfile}" />-->
        <Enqueue queues="out" />
    </process>


    <process input="out">
        <!--<stream.monitor.DataRate every="400"/>-->
        <!--<PrintData/>-->
        <streams.cta.io.KryoWriter url="file:${outfile}" />
        <streams.DataRate every="200" silent="false"/>
    </process>
</application>