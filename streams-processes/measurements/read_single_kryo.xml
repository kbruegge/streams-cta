<application>
    
    <!--<property name="infile" value="/Users/kai/fact_phido/cta/cta_mc_data.kryo" />-->

    <property name="infile" value="/Users/kai/fact_phido/cta/cta_mc_data_copy_1.kryo" />

    <stream id="cta:data" class="streams.cta.io.KryoStream" url="${infile}"/>

    <queue class="stream.io.BlockingQueue" id="performance" />

    <process input="cta:data" >
        <streams.cta.extraction.ArrivalTime/>
        <streams.cta.extraction.Photons/>

        <streams.DataRate every="500" silent="false"/>
        <Enqueue queues="performance" condition="%{data.@datarate} != null"/>
    </process>

    <process input="performance">
        <streams.cta.io.JSONWriter url="file:./performance_single_kryo.json" keys="@datarate" writeblock="true"/>
    </process>

</application>