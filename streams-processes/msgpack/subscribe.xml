<application>

    <stream id="cta:data" class="streams.cta.io.msgpack.MsgPackRawEventStream" addresses="tcp://127.0.0.1:5550,tcp://127.0.0.1:5551"/>

    <process input="cta:data">
        <streams.DataRate every="2000" logmemory="true"/>

        <If condition="%{data.@datarate} != null" >
            <streams.cta.io.JSONWriter url="file:./subscription_msgpack.json" keys="@stream,@datarate" writeblock="true"/>
        </If>
    </process>

</application>