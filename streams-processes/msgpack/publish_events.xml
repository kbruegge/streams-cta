<application>
    
    <!--<stream id="cta:data" class="streams.cta.io.SyntheticEventStream" delay="0" />-->

    <!--<stream id="cta:data" class="streams.cta.io.eventio.EventIOStream" url="file:/Users/kai/Downloads/electron_20deg_90deg_run7683___cta-trg-test-LST4_desert_samplemode_test-250MHz.simtel"-->
            <!--limit="1000" />-->
    <!--<property name="infile" value="cta_data.kryo" />-->
    <property name="infile" value="/Users/kai/fact_phido/cta/cta_mc_data_copy_1.kryo" />
    <stream id="cta:data" class="streams.cta.io.KryoStream" url="file:${infile}"/>



    <process input="cta:data"  >
        <streams.DataRate every="500" />
        <!--<Delay time="25ms" />-->
        <streams.cta.io.msgpack.MsgPackPublisher addresses="tcp://*:5556" />
        <Skip condition="%{data.@datarate} == null" />
            <streams.cta.io.JSONWriter url="file:./performance_publish_msgpack.json" keys="@datarate,@packetSize" writeblock="true"/>
    </process>

</application>