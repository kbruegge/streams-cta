<application>
    

    <stream id="cta:data_1" class="streams.cta.io.protobuf.ProtoRawEventStream"
            addresses="tcp:/10.141.42.4:5558,tcp:/10.141.42.4:5557,tcp:/10.141.42.4:5556,tcp:/10.141.42.4:5555"/>


    <queue class="stream.io.BlockingQueue" id="performance" />

    <process input="cta:data_1">
        <streams.DataRate every="500"/>
        <streams.cta.extraction.ArrivalTime/>
        <streams.cta.extraction.Photons/>
        <Enqueue queues="performance" condition="%{data.@datarate} != null"/>
    </process>

    <process input="performance">
        <!--<PrintData/>-->
        <streams.cta.io.JSONWriter url="file:/home/kbruegge/storm_datarate.json" keys="@datarate" writeblock="true"/>
    </process>
    
</application>