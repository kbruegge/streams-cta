<application>
    
    <!--<stream id="cta:data" class="streams.cta.io.SyntheticEventStream"-->
        <!--limit="10000" />-->

    <!--<property name="infile" value="/Users/kai/fact_phido/cta/gamma_20deg_0deg_run40814___cta-prod2_desert-1640m-Aar.simtel.gz" />-->
    <!--<property name="outfile" value="./data.kryo" />-->
    <property name="num_copies" value="1" />

    <stream id="cta:data_${copy.id}" class="streams.cta.io.zeromq.CTAEventSubscriber"
             addresses="tcp://129.217.160.98:5556,tcp://127.0.0.1:5552,tcp://127.0.0.1:5551,tcp://127.0.0.1:5550"/>
    <!--<stream id="cta:data" class="streams.cta.io.zeromq.CTAEventSubscriber" addresses="tcp://129.217.160.98:5556"/>-->


    
    <process input="cta:data_${copy.id}" copies="${num_copies}">
               <streams.DataRate every="200"/>
                <Enqueue queues="performance" condition="%{data.@datarate} != null"/>
    </process>

    <process input="performance">
        <streams.cta.io.JSONWriter url="file:./performance_subscription.json" keys="@datarate" writeblock="true"/>
    </process>
    
</application>